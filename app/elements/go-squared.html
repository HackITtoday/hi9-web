<script>
Polymer({
  is: 'go-squared',
  properties: {
    user: {
      type: Object,
      observer: 'userUpdate'
    },
    id: {
      type: String,
      value: 'GSN-963825-Q',
      observer: 'init'
    }
  },
  ready: function () {
    window.setTimeout(function() {
      !function(g,s,q,r,d){r=g[r]=g[r]||function(){(r.q=r.q||[]).push(
      arguments)};d=s.createElement(q);q=s.getElementsByTagName(q)[0];
      d.src='//d1l6p2sc9645hc.cloudfront.net/tracker.js';q.parentNode.
      insertBefore(d,q)}(window,document,'script','_gs');
    }
    ,1000);
  },
  init: function (id) {
    window.setTimeout(function() {
      _gs('GSN-963825-Q');
    },2000);
  },
  userUpdate: function(user) {
    window.setTimeout(function() {
      var app = document.querySelectorAll('html go-squared');
      if (app.length > 0) {
        var user =  app[0].user;
      
        if (user !== null) {
          var userID = user.uid;
          console.log(user);
          var properties = {
            id: userID,
            name: user.google.displayName,
            other: user
          };
          _gs('identify', userID, properties);
        }
      }
    },3000)
  }
});
</script>
