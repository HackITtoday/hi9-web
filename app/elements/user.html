<dom-module id="user-page">
  <template>
    <h3> Account Information </h3> 
    <div>
      <p> Hi <span>{{name}}</span>, Please Make Sure that you add the Hi9 Extension.  </p>
      <p> If not then <a href="https://chrome.google.com/webstore/detail/hi9/hcidobkpedoelpnebadegeppfccncdel?">click here</a> and Add the Extension to Chrome </p>
    </div>
    <firebase-data data="{{data}}" uid="[[uid]]"></firebase-data>
    <form-data data="{{data}}"></form-data>
    <content></content>
  </template>
</dom-module>
<script>
(function() {
  'use strict';
  Polymer({
    is: 'user-page',
    properties: {
      user: {
        type:Object, notify:true
      },
      name: {
        computed: "get(user.google.displayName)"
      },
      uid: {
        computed: "get(user.uid)"
      }
    },
    get: function(val) {
      return val;
    },
  });
  function clone(obj) {
    var copy;
    // Handle the 3 simple types, and null or undefined
    if (null == obj || "object" != typeof obj) return obj;
    // Handle Date
    if (obj instanceof Date) {
      copy = new Date();
      copy.setTime(obj.getTime());
      return copy;
    }
    // Handle Array
    if (obj instanceof Array) {
      copy = [];
      for (var i = 0, len = obj.length; i < len; i++) {
        copy[i] = clone(obj[i]);
      }
      return copy;
    }
    // Handle Object
    if (obj instanceof Object) {
      copy = {};
      for (var attr in obj) {
        if (obj.hasOwnProperty(attr)) copy[attr] = clone(obj[attr]);
      }
      return copy;
    }
    throw new Error("Unable to copy obj! Its type isn't supported.");
  }
})();
</script>

  <dom-module id="form-data">
    <template>

      <paper-input value="{{data.email::input}}" ></paper-input>
      <paper-input value="{{data.num::input}}" ></paper-input>
      <paper-input value="{{data.owner::input}}" ></paper-input>

    </template>
  </dom-module>
<script>
  (function () {
    Polymer({
      is: 'form-data',
      properties: {
        data:{ 
          type:Object,  notify: true
        }
      }
    });
  })();
</script>

<link rel="import" href="../bower_components/firebase-element/firebase-document.html">
<dom-module id="firebase-data">
  <template>
    <firebase-document data="{{data}}" location="{{userUrl}}">
    </firebase-document>
  </template>
</dom-module>
<script>
  (function () {
    Polymer({
      is: 'firebase-data',
      properties: {
        data:{ 
          type: Object, notify: true
        },
        userUrl: {
          computed:"getUserDataUrl(uid)"
        },
        uid: String
      },
      getUserDataUrl: function(uid) {
        return "https://hi9site.firebaseio.com/users/" + uid;
      },
      get(val){
        return val
      }
    });
  })();
</script>
